{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/img/error.png","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightbox = new SimpleLightbox('.images-container a', { captionsData: 'alt', });\n\nexport function createImagesMarkup(images) {\n\n  const imagesContainer = document.querySelector(\".images-container\");\n  const markup = images.map(({ largeImageURL, webformatURL, tags, likes, views, comments, downloads }) =>\n    `<div class=\"image-card\">\n    <div class=\"image\">\n      <a href=\"${largeImageURL}\">\n      <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n      </a>\n   </div>\n   <ul class=\"stats\">\n      <li class=\"stats-name\">Likes<p class=\"numbers\">${likes}</p></li>\n      <li class=\"stats-name\">Views<p class=\"numbers\">${views}</p></li>\n      <li class=\"stats-name\">Comments<p class=\"numbers\">${comments}</p></li>\n      <li class=\"stats-name\">Downloads<p class=\"numbers\">${downloads}</p></li>\n    </ul></div>`)\n    .join(\"\");\n  imagesContainer.insertAdjacentHTML(\"beforeend\", markup);\n  lightbox.refresh();\n}\n\n   ","import axios from \"axios\";\n\naxios.defaults.baseURL = \"https://pixabay.com/api/\";\n\n\n\nexport async function getImages(value,  page) {\n  const response = await axios.get(\"\", {\n    params: {\n      key: '42585608-470f45864f44da3a6987e4378',\n      q: value,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: 15,\n    }\n  });\n  console.log(response.data);\n  return response.data;\n\n  }\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAONJREFUSIm9lkESgyAMRT+dOhyr3kw9WdtjJVmkiw4OKgGU0sy4keT9MPiDgBFEMjOL1jxEMlucuwV3DhOAlyreVnEI5zARCbwfTKFD57muLtdcgVfXtsCLjF/ATVYOLiJjCZjK2TBz8NKuAiglwixPZlFT4NDJibV4PStggWrOLOQkjRaH98NMJKuZgK+xVLHUGKsosBcBgFo4ANxqklqiagdhNqliAc7NnqJADA/A+EyKIn/5TJnluU9oNdoq0H1UJF80RNeJ2vVO6Hqr5WoOPkjNnlw4hweA8cz42HTV+tvyAUq6NbiLrn50AAAAAElFTkSuQmCC\"","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { createImagesMarkup } from \"./js/render-functions\";\nimport { getImages } from \"./js/pixabay-api.js\";\n\nimport error from './img/error.png'\n\n\nconst form = document.querySelector('.form');\nconst imageContainer = document.querySelector('.images-container');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nlet page = 1;\nlet inputValue; \n\n\nform.addEventListener(\"submit\", submitFormHandler);\nloadMoreBtn.addEventListener('click', loadMoreHandler);\n\nasync function submitFormHandler(event) {\n  event.preventDefault();\n  imageContainer.innerHTML = null;\n   inputValue = form.input.value.trim();\n  loader.classList.remove('is-hidden');\n  \n  if (!inputValue) {\n    iziToast.error({\n      title: 'Error',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      iconUrl: error,\n      fontSize: 'large',\n      position: 'topRight',\n      messageColor: 'white',\n      titleColor: 'white',\n      theme: 'dark',\n      timeout: 5000,\n      backgroundColor: '#EF4040',\n      progressBar: false,\n    });\n    loader.classList.add('is-hidden');\n    return;\n  } \n  try {\n    const images = await getImages(inputValue);\n    if (!images.hits.length) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        iconUrl: error,\n        fontSize: 'large',\n        position: 'topRight',\n        messageColor: 'white',\n        titleColor: 'white',\n        theme: 'dark',\n        timeout: 5000,\n        backgroundColor: '#EF4040',\n        progressBar: false,\n      });\n    }\n    createImagesMarkup(images.hits);\n    loader.classList.add('is-hidden');\n    loadMoreBtn.classList.remove('is-hidden');\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n  \nasync function loadMoreHandler() {\n  loader.classList.remove('is-hidden');\n  loadMoreBtn.classList.add('is-hidden');\n  page += 1;\n\n  try {\n    const images = await getImages(inputValue, page); \n    const totalPages = Math.ceil(images.totalHits / 15);\n    createImagesMarkup(images.hits);\n    smoothScroll();\n    \n    if (page >= totalPages) {\n      loader.classList.add('is-hidden');\n      loadMoreBtn.classList.add('is-hidden');\n    return iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n    }\n    loader.classList.add('is-hidden');\n    loadMoreBtn.classList.remove('is-hidden');\n  } catch (error) {\n    console.log(error);\n    console.log(error.message);\n    loader.classList.add('is-hidden');\n  }\n}\n  \nfunction smoothScroll() {\n  const imageHeight = imageContainer.firstElementChild.getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: imageHeight * 2,\n    behavior: 'smooth',\n  });\n}"],"names":["lightbox","SimpleLightbox","createImagesMarkup","images","imagesContainer","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","axios","getImages","value","page","response","error","form","imageContainer","loader","loadMoreBtn","inputValue","submitFormHandler","loadMoreHandler","event","iziToast","totalPages","smoothScroll","imageHeight"],"mappings":"owBAGA,MAAMA,EAAW,IAAIC,EAAe,sBAAuB,CAAE,aAAc,KAAK,CAAG,EAE5E,SAASC,EAAmBC,EAAQ,CAEzC,MAAMC,EAAkB,SAAS,cAAc,mBAAmB,EAC5DC,EAASF,EAAO,IAAI,CAAC,CAAE,cAAAG,EAAe,aAAAC,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IACjG;AAAA;AAAA,iBAEaN,CAAa;AAAA,wCACUC,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA;AAAA,uDAIXC,CAAK;AAAA,uDACLC,CAAK;AAAA,0DACFC,CAAQ;AAAA,2DACPC,CAAS;AAAA,gBACpD,EACX,KAAK,EAAE,EACVR,EAAgB,mBAAmB,YAAaC,CAAM,EACtDL,EAAS,QAAO,CAClB,CCtBAa,EAAM,SAAS,QAAU,2BAIlB,eAAeC,EAAUC,EAAQC,EAAM,CAC5C,MAAMC,EAAW,MAAMJ,EAAM,IAAI,GAAI,CACnC,OAAQ,CACN,IAAK,qCACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAU,EACX,CACL,CAAG,EACD,eAAQ,IAAIC,EAAS,IAAI,EAClBA,EAAS,IAElB,CCrBA,MAAeC,EAAA,yaCSTC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAiB,SAAS,cAAc,mBAAmB,EAC3DC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,gBAAgB,EAE3D,IAAIN,EAAO,EACPO,EAGJJ,EAAK,iBAAiB,SAAUK,CAAiB,EACjDF,EAAY,iBAAiB,QAASG,CAAe,EAErD,eAAeD,EAAkBE,EAAO,CAMtC,GALAA,EAAM,eAAc,EACpBN,EAAe,UAAY,KAC1BG,EAAaJ,EAAK,MAAM,MAAM,KAAI,EACnCE,EAAO,UAAU,OAAO,WAAW,EAE/B,CAACE,EAAY,CACfI,EAAS,MAAM,CACb,MAAO,QACP,QACE,2EACF,QAAST,EACT,SAAU,QACV,SAAU,WACV,aAAc,QACd,WAAY,QACZ,MAAO,OACP,QAAS,IACT,gBAAiB,UACjB,YAAa,EACnB,CAAK,EACDG,EAAO,UAAU,IAAI,WAAW,EAChC,MACD,CACD,GAAI,CACF,MAAMlB,EAAS,MAAMW,EAAUS,CAAU,EACpCpB,EAAO,KAAK,QACfwB,EAAS,MAAM,CACb,MAAO,QACP,QACE,2EACF,QAAST,EACT,SAAU,QACV,SAAU,WACV,aAAc,QACd,WAAY,QACZ,MAAO,OACP,QAAS,IACT,gBAAiB,UACjB,YAAa,EACrB,CAAO,EAEHhB,EAAmBC,EAAO,IAAI,EAC9BkB,EAAO,UAAU,IAAI,WAAW,EAChCC,EAAY,UAAU,OAAO,WAAW,CACzC,OAAQJ,EAAO,CACd,QAAQ,IAAIA,EAAM,OAAO,CAC1B,CACH,CAEA,eAAeO,GAAkB,CAC/BJ,EAAO,UAAU,OAAO,WAAW,EACnCC,EAAY,UAAU,IAAI,WAAW,EACrCN,GAAQ,EAER,GAAI,CACF,MAAMb,EAAS,MAAMW,EAAUS,EAAYP,CAAI,EACzCY,EAAa,KAAK,KAAKzB,EAAO,UAAY,EAAE,EAIlD,GAHAD,EAAmBC,EAAO,IAAI,EAC9B0B,IAEIb,GAAQY,EACV,OAAAP,EAAO,UAAU,IAAI,WAAW,EAChCC,EAAY,UAAU,IAAI,WAAW,EAChCK,EAAS,KAAK,CACnB,QAAS,4DACf,CAAK,EAEDN,EAAO,UAAU,IAAI,WAAW,EAChCC,EAAY,UAAU,OAAO,WAAW,CACzC,OAAQJ,EAAO,CACd,QAAQ,IAAIA,CAAK,EACjB,QAAQ,IAAIA,EAAM,OAAO,EACzBG,EAAO,UAAU,IAAI,WAAW,CACjC,CACH,CAEA,SAASQ,GAAe,CACtB,MAAMC,EAAcV,EAAe,kBAAkB,sBAAqB,EAAG,OAE7E,OAAO,SAAS,CACd,IAAKU,EAAc,EACnB,SAAU,QACd,CAAG,CACH"}